# 账单

在 TensorStack AI 平台中，[项目](./project.md) 是账单统计的基本单位。一个项目中所有 Apps 和 APIs 使用每种资源产生的费用都由项目管理员负责，即使 Apps 是由其他项目成员创建的。

收费的资源种类包括：

| 资源种类                     | 价格单位 | 费用计算方式                | 备注                                             |
| ---------------------------- | -------- | --------------------------- | ------------------------------------------------ |
| CPU                          | 核/小时  | 费用 = 价格 * 使用量 * 时长 | 使用量指请求量与实际使用量的较大值               |
| 内存                         | GiB/小时 | 费用 = 价格 * 使用量 * 时长 | 使用量指请求量与实际使用量的较大值               |
| PVC                          | GiB/小时 | 费用 = 价格 * 使用量 * 时长 | 使用量指 PVC 的总容量                            |
| 网络流量                     | GiB      | 费用 = 价格 * 使用量        | 使用量指网络流量的累计值，包括流入和流出两部分   |
| GPU                          | 个/小时  | 费用 = 价格 * 使用量 * 时长 | 使用量指所请求的 GPU 总个数，无论是否实际使用    |
| 其他扩展资源，例如 RDMA 网卡 | 个/小时  | 费用 = 价格 * 使用量 * 时长 | 使用量指所请求的扩展资源总个数，无论是否实际使用 |

<aside class="note explanation">
<div class="title">说明</div>

1. “资源种类” 可以细分为子类，例如，根据 GPU 卡的类型，设定不同的价格。
1. TensorStack AI 平台每小时出账一次，将每个账户在本出账周期产生的费用从账户余额中扣除。
1. 计算费用时精确到小数点后 6 位（单位：元），实际扣除费用时仅扣除到小数点后 2 位，小数点后第 3 位到第 6 位部分金额会被舍弃，这种舍弃部分的金额称作抹零金额。

</aside>

## 示例

某用户拥有一个项目，该项目中只有一个 App。在 `2024/09/01 10:00:00 ~ 13:00:00` 时段，计费系统将生成 3 笔账单，分别是：

* `2024/09/01 10:00:00 ~ 11:00:00`
* `2024/09/01 11:00:00 ~ 12:00:00`
* `2024/09/01 12:00:00 ~ 13:00:00`

假设该 App 请求了 2核 CPU、2GiB 内存，但是实际使用量存在一定波动：

* 在 `2024/09/01 10:00:00 ~ 11:30:00` 时段，实际使用了 0.5核 CPU、0.5GiB 内存
* 在 `2024/09/01 11:30:00 ~ 12:00:00` 时段，实际使用了 4核 CPU、4GiB 内存

假设 CPU 的价格为 0.003元/核/小时，内存的价格为 0.003元/GiB/小时，那么上述 3 笔账单的费用分别为：

* `2024/09/01 10:00:00 ~ 11:00:00`：请求量与实际使用量的较大值为 1核 CPU、1GiB 内存，费用 = 0.003元/核/小时 * 2核 * 1小时 + 0.003元/GiB/小时 * 2GiB * 1小时 = 0.012元，抹零后实际扣除费用为 0.01元；
* `2024/09/01 11:00:00 ~ 12:00:00`：请求量与实际使用量的较大值前半小时为 1核 CPU、1GiB 内存，后半小时为 4核 CPU、4GiB 内存，平均为 2.5核 CPU、2.5GiB 内存，因此费用 = 0.003元/核/小时 * 2.5核 * 1小时 + 0.003元/GiB/小时 * 2.5GiB * 1小时 = 0.015元，抹零后实际扣除费用为 0.01元；
* `2024/09/01 12:00:00 ~ 13:00:00`：请求量与实际使用量的较大值为 4核 CPU、4GiB 内存，费用 = 0.003元/核/小时 * 4核 * 1小时 + 0.003元/GiB/小时 * 4GiB * 1小时 = 0.024元，抹零后实际扣除费用为 0.02元。

## 下一步

- [查看账单](../guide/account/view-bill.md)
